This directory contains scripts, fortran code to write out [NetCDF](https://www.unidata.ucar.edu/software/netcdf/) formatted file(s) that could be
used as external dataset(s) in various applications of [GEOS-ESM](https://github.com/GEOS-ESM), for example:
- [GEOSgcm](https://github.com/GEOS-ESM/GEOSgcm)
- [GEOSadas](https://github.com/GEOS-ESM/GEOSadas)

It also has a few notebooks, see `notebooks/` that could be used to plot the data.

1. `write_kPAR.py`: A script to write out a climatological k-PAR (Photosynthetically Available Radiation) file.
   It will write a single file (with a single data record) for each month.
   
   To write a single file, use for instance:
   -  [xarray: ds.to_netcdf()](https://xarray.pydata.org/en/stable/generated/xarray.Dataset.to_netcdf.html)
   - or `ncrcat`, e.g., `ncrcat clim_kpar_GMAO2022_*.nc4 clim_kpar_GMAO2022.nc4`

2. Fortran program: `proc_SST_FRACI_eight.F90` which relies on `sst_ice_helpers.F90`, compiled using `CMakeLists.txt` produce
   SST and sea ice concentration data on following regular lat-lon (date-line-edge, pole-edge) grid:
   - Executable: `sst_sic_eight.x` from `proc_SST_FRACI_eight.F90` on **1/8-deg**
   - Usage instructions, if _your_ `install/bin` is: `INSTALL_BIN`,
     ${INSTALL_BIN}/sst_sic_eight.x input_template; see example `input_template`
     - If all was successful:
       - a netcdf file: sst_fraci_yyyymmdd.nc4 is produced.
       - **optionally** one can also write two **binary** files: Ostia_xx_yyyymmdd.bin; xx= sst, ice,
         by setting the **last line** of the `input_template` to `yes`.

   - f2py built `read_sst_ice_bin.f90` is useful to read back the binary files (optionally) generated by above.

3. Use `plot_binary_sst_ice.py` to plot the **binary** SST and sea ice concentration; it relies on above `read_sst_ice_bin.f90`:

     - ${INSTALL_BIN}/plot_binary_sst_ice.py -h
     - ${INSTALL_BIN}/plot_binary_sst_ice.py -year 2020 -month 11 -day 28; 
     assuming `Ostia_sst_20201128.bin, Ostia_ice_20201128.bin` are in _current_ path.

4. You can use your preferred tool to read the netcdf output `sst_fraci_yyyymmdd.nc4`, an example is provided in `plot_sst_ice.py`.

**Note**:
 - For all python scripts, python3 or later version is needed.
